<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدخال نتائج الطلاب</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            direction: rtl;
            background-color: #f4f4f4;
            margin: 20px;
        }
        select, input, button {
            margin: 10px;
            padding: 8px;
            font-size: 1rem;
        }
        table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 100%;
            background-color: #fff;
            border: 1px solid #ddd;
        }
        th, td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        h1 {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>إدخال نتائج الطلاب</h1>

    <label for="subject">اختر المادة:</label>
    <select id="subject">
        <option value="العربية">العربية</option>
        <option value="الرياضيات">الرياضيات</option>
        <option value="الفرنسية">الفرنسية</option>
        <option value="التربية الإسلامية">التربية الإسلامية</option>
    </select>

    <br>
    <h3>إدخال نتائج الطلاب للمادة المختارة</h3>

    <label for="name">اسم الطالب:</label>
    <input type="text" id="name" placeholder="أدخل اسم الطالب">
    
    <label for="num">رقم الطالب:</label>
    <input type="number" id="num" placeholder="أدخل رقم الطالب">
    
    <label for="خ1">خ1:</label>
    <input type="number" id="خ1" placeholder="أدخل نتيجة خ1">
    
    <label for="خ2">خ2:</label>
    <input type="number" id="خ2" placeholder="أدخل نتيجة خ2">
    
    <label for="خ3">خ3:</label>
    <input type="number" id="خ3" placeholder="أدخل نتيجة خ3">
    
    <label for="ام1">ام1:</label>
    <input type="number" id="ام1" placeholder="أدخل نتيجة ام1">
    
    <label for="ام2">ام2:</label>
    <input type="number" id="ام2" placeholder="أدخل نتيجة ام2">
    
    <label for="ام3">ام3:</label>
    <input type="number" id="ام3" placeholder="أدخل نتيجة ام3">
    
    <button onclick="addResult()">إضافة النتيجة</button>
    <button onclick="saveToJSON()">حفظ البيانات</button>

    <h3>نتائج المادة المختارة:</h3>
    <div id="results"></div>

    <script>
        const subjectData = {
            "العربية": [],
            "الرياضيات": [],
            "الفرنسية": [],
            "التربية الإسلامية": []
        };

        // إضافة نتيجة الطالب إلى المادة المختارة
        function addResult() {
            const subject = document.getElementById('subject').value;
            const name = document.getElementById('name').value;
            const num = document.getElementById('num').value;
            const خ1 = parseInt(document.getElementById('خ1').value);
            const خ2 = parseInt(document.getElementById('خ2').value);
            const خ3 = parseInt(document.getElementById('خ3').value);
            const ام1 = parseInt(document.getElementById('ام1').value);
            const ام2 = parseInt(document.getElementById('ام2').value);
            const ام3 = parseInt(document.getElementById('ام3').value);

            // حساب المجموع والمعدل العام
            const المجموع = خ1 + خ2 + خ3 + ام1 + ام2 + ام3;
            const المعدل العام = المجموع / 6;

            // إضافة النتيجة للمادة المختارة
            subjectData[subject].push({
                الإسم: name,
                الرقم: num,
                خ1: خ1,
                خ2: خ2,
                خ3: خ3,
                ام1: ام1,
                ام2: ام2,
                ام3: ام3,
                المجموع: المجموع,
                المعدل العام: المعدل العام
            });

            // تحديث عرض النتائج
            displayResults(subject);
        }

        // عرض النتائج للمادة المختارة
        function displayResults(subject) {
            const resultsDiv = document.getElementById('results');
            const data = subjectData[subject];
            let tableHTML = "<table><tr><th>الإسم</th><th>الرقم</th><th>خ1</th><th>خ2</th><th>خ3</th><th>ام1</th><th>ام2</th><th>ام3</th><th>المجموع</th><th>المعدل العام</th></tr>";

            data.forEach(result => {
                tableHTML += `<tr>
                    <td>${result.الإسم}</td>
                    <td>${result.الرقم}</td>
                    <td>${result.خ1}</td>
                    <td>${result.خ2}</td>
                    <td>${result.خ3}</td>
                    <td>${result.ام1}</td>
                    <td>${result.ام2}</td>
                    <td>${result.ام3}</td>
                    <td>${result.المجموع}</td>
                    <td>${result.المعدل العام}</td>
                </tr>`;
            });
            tableHTML += "</table>";
            resultsDiv.innerHTML = tableHTML;
        }

        // حفظ البيانات في JSON
        function saveToJSON() {
            const subject = document.getElementById('subject').value;
            const data = subjectData[subject];
            const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = subject + '.json';
            link.click();
        }
    </script>
</body>
</html>
